(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["form"],{3639:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){t.invalid;return[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-basic-form",attrs:{"label-width":"200px"}},[r("el-card",{attrs:{header:"基础信息"}},[e.exampleId?r("example-id",{directives:[{name:"color",rawName:"v-color"}],model:{value:e.formValues.id,callback:function(t){e.$set(e.formValues,"id",t)},expression:"formValues.id"}}):e._e(),r("example-clock",{directives:[{name:"color",rawName:"v-color",value:"#737373",expression:"'#737373'"}]}),r("example-channel",{attrs:{rules:{required:!0}},model:{value:e.formValues.channel,callback:function(t){e.$set(e.formValues,"channel",t)},expression:"formValues.channel"}}),r("example-name",{attrs:{rules:{required:!0}},model:{value:e.formValues.name,callback:function(t){e.$set(e.formValues,"name",t)},expression:"formValues.name"}}),r("example-short-name",{attrs:{rules:{required:!0,max:20},formValues:e.formValues},model:{value:e.formValues.shortName,callback:function(t){e.$set(e.formValues,"shortName",t)},expression:"formValues.shortName"}}),r("example-time",{attrs:{rules:{required:!0,afterNow:30}},model:{value:e.formValues.time,callback:function(t){e.$set(e.formValues,"time",t)},expression:"formValues.time"}})],1),r("el-card",{attrs:{header:"高级编目"}},[r("example-recommended",{model:{value:e.formValues.recommended,callback:function(t){e.$set(e.formValues,"recommended",t)},expression:"formValues.recommended"}}),r("example-recommend-rate",{attrs:{formValues:e.formValues},model:{value:e.formValues.recommendRate,callback:function(t){e.$set(e.formValues,"recommendRate",t)},expression:"formValues.recommendRate"}}),r("example-tag",{attrs:{rules:{required:!!e.formValues.recommended}},model:{value:e.formValues.tag,callback:function(t){e.$set(e.formValues,"tag",t)},expression:"formValues.tag"}}),r("example-type",{model:{value:e.formValues.type,callback:function(t){e.$set(e.formValues,"type",t)},expression:"formValues.type"}}),r("example-category",{model:{value:e.formValues.category,callback:function(t){e.$set(e.formValues,"category",t)},expression:"formValues.category"}}),r("example-actor-complex",{model:{value:e.formValues.actor,callback:function(t){e.$set(e.formValues,"actor",t)},expression:"formValues.actor"}}),r("example-description",{model:{value:e.formValues.description,callback:function(t){e.$set(e.formValues,"description",t)},expression:"formValues.description"}})],1),r("app-form-action",[r("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:e.save}},[e._v(" 提交 ")])],1)],1)]}}])})],1)},l=[],u=(r("96cf"),r("1da1")),i=r("5530"),n=r("3d30"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"人物",size:"medium",required:e.isRequired}},[r("el-input",{attrs:{clearable:"",type:"text",placeholder:"请填写导演姓名"},model:{value:e.actor.director,callback:function(t){e.$set(e.actor,"director",t)},expression:"actor.director"}},[r("template",{slot:"prepend"},[e._v("导演")])],2),r("app-form-error",{attrs:{error:a[0]}})],1)]}}])}),r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{size:"medium"}},[r("el-input",{attrs:{clearable:"",type:"text",placeholder:"请填写主演姓名"},model:{value:e.actor.protagonist,callback:function(t){e.$set(e.actor,"protagonist",t)},expression:"actor.protagonist"}},[r("template",{slot:"prepend"},[e._v("主演")])],2),r("app-form-error",{attrs:{error:a[0]}}),r("app-form-tip",[e._v("必须同时填写导演、主演才有效")])],1)]}}])})],1)},s=[],c=r("3835"),d={name:"example-actor-complex",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.watchPropValue,o=r.setInitialValue,s=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,watchPropValue:i,setInitialValue:o,updateLocalValue:s}},data:function(){return{actor:{director:"",protagonist:""}}},watch:{actor:{handler:function(){this.updateLocalValue(this.getActorValue())},deep:!0}},created:function(){var e=this;this.watchPropValue((function(t){e.setActorValue(t)}))},methods:{getActorValue:function(){var e=this.actor,t=e.director,r=e.protagonist;return t&&r?[t,r]:[]},setActorValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c["a"])(e,2),r=t[0],a=void 0===r?"":r,l=t[1],u=void 0===l?"":l;this.actor={director:a,protagonist:u}}}},m=d,p=r("2877"),f=Object(p["a"])(m,o,s,!1,null,"022044ae",null),v=f.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"分类",size:"medium",required:e.isRequired}},[r("el-checkbox-group",{attrs:{value:e.localValue},on:{input:e.updateLocalValue}},[r("el-checkbox",{attrs:{label:1}},[e._v("剧情")]),r("el-checkbox",{attrs:{label:2}},[e._v("喜剧")]),r("el-checkbox",{attrs:{label:4}},[e._v("战争")]),r("el-checkbox",{attrs:{label:5}},[e._v("西部")]),r("el-checkbox",{attrs:{label:6}},[e._v("科幻")]),r("el-checkbox",{attrs:{label:7}},[e._v("悬疑")]),r("el-checkbox",{attrs:{label:8}},[e._v("灾难")]),r("el-checkbox",{attrs:{label:9}},[e._v("武侠")]),r("el-checkbox",{attrs:{label:10}},[e._v("动画")]),r("el-checkbox",{attrs:{label:11}},[e._v("动作")]),r("el-checkbox",{attrs:{label:12}},[e._v("历史")])],1),r("app-form-error",{attrs:{error:a[0]}})],1)]}}])})},b=[],h={name:"example-category",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}},created:function(){this.setInitialValue([])}},y=h,x=Object(p["a"])(y,V,b,!1,null,"e13c4090",null),g=x.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"频道",size:"medium",required:e.isRequired}},[r("el-select",{attrs:{clearable:"",filterable:"","filter-method":e.filterChannel,value:e.localValue,placeholder:"请输入关键词进行搜索"},on:{input:e.updateLocalValue}},e._l(e.options,(function(t){return r("el-option",{key:t.id,attrs:{value:t.id,label:t.name}},[r("span",[e._v(e._s(t.name)+" - "+e._s(t.englishName))])])})),1),r("app-form-error",{attrs:{error:a[0]}}),r("app-form-tip",[e._v("支持中文名、拼音及英文名检索")])],1)]}}])})},_=[],j=(r("4de4"),r("b0c0"),r("2ca0"),{name:"example-channel",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){var e=[{id:1,name:"电影",code:"dy",pinyin:"dianying",englishName:"movie"},{id:2,name:"电视剧",code:"dsj",pinyin:"dianshiju",englishName:"teleplay"},{id:3,name:"动漫",code:"dm",pinyin:"dongman",englishName:"anime"},{id:4,name:"综艺",code:"zy",pinyin:"zongyi",englishName:"variety show"},{id:5,name:"儿童",code:"et",pinyin:"ertong",englishName:"children"}];return{list:e,options:e}},methods:{filterChannel:function(e){var t=function(t){return t.startsWith(e)};this.options=e?this.list.filter((function(e){return t(e.name)||t(e.code)||t(e.pinyin)||t(e.englishName)})):this.list}}}),k=j,O=Object(p["a"])(k,q,_,!1,null,"3625ce00",null),R=O.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form-item",{attrs:{label:"当前时间",size:"medium",required:e.isRequired}},[r("div",[e._v(e._s(e.clock))])])},$=[],L={name:"example-clock",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.isRequired;return{isRequired:a}},data:function(){return{task:null,clock:this.getTime()}},created:function(){this.start()},beforeDestroy:function(){this.clear()},methods:{start:function(){var e=this;this.task=setInterval((function(){e.clock=e.getTime(),e.$forceUpdate()}),1e3)},clear:function(){clearInterval(this.task),this.task=null},getTime:function(){return(new Date).toLocaleString()}}},w=L,I=Object(p["a"])(w,S,$,!1,null,"209f2f69",null),E=I.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"简介",size:"medium",required:e.isRequired}},[r("el-input",{attrs:{clearable:"",value:e.localValue,type:"textarea",rows:6,maxlength:"240","show-word-limit":"",placeholder:"剧情描述"},on:{input:e.updateLocalValue}}),r("app-form-error",{attrs:{error:a[0]}})],1)]}}])})},z=[],C={name:"example-description",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}}},F=C,T=Object(p["a"])(F,N,z,!1,null,"78fe38ba",null),A=T.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form-item",{attrs:{label:"ID",size:"medium",required:e.isRequired}},[r("div",[e._v(e._s(e.localValue))])])},P=[],H={name:"example-id",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.isRequired,l=r.localValue;return{isRequired:a,localValue:l}},data:function(){return{}}},J=H,M=Object(p["a"])(J,D,P,!1,null,"1317b623",null),U=M.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"标题",size:"medium",required:e.isRequired}},[r("el-input",{attrs:{clearable:"",value:e.localValue,type:"text",placeholder:"标题"},on:{input:e.updateLocalValue}}),r("app-form-error",{attrs:{error:a[0]}})],1)]}}])})},B=[],G={name:"example-name",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}}},K=G,Q=Object(p["a"])(K,W,B,!1,null,"37f180d7",null),X=Q.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"是否推荐",size:"medium",required:e.isRequired}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,value:e.localValue},on:{input:e.updateLocalValue}}),r("app-form-error",{attrs:{error:a[0]}}),r("app-form-tip",[e._v("表单联动 - 开启推荐后可设置推荐评分")])],1)]}}])})},Z=[],ee={name:"example-recommended",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}}},te=ee,re=Object(p["a"])(te,Y,Z,!1,null,"4675ffac",null),ae=re.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!!e.formValues.recommended,expression:"!!formValues.recommended"}]},[r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"推荐评分",size:"medium",required:e.isRequired}},[r("el-input-number",{attrs:{value:e.localValue,min:1,max:5},on:{input:e.updateLocalValue}}),r("app-form-error",{attrs:{error:a[0]}})],1)]}}])})],1)])},ue=[],ie={name:"example-recommend-rate",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}}},ne=ie,oe=Object(p["a"])(ne,le,ue,!1,null,"4bed896a",null),se=oe.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"短标题",size:"medium",required:e.isRequired}},[r("el-input",{attrs:{clearable:"",value:e.localValue,type:"text",placeholder:"短标题"},on:{input:e.updateLocalValue}}),r("app-form-error",{attrs:{error:a[0]}}),r("app-form-tip",[e._v(" 表单联动 - 新建时自动复制“标题”的内容，除非手动进行修改 ")])],1)]}}])})},de=[],me={name:"example-short-name",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},watch:{"formValues.name":function(e,t){var r=!(this.dirty||this.formValues.id);r&&this.setInitialValue(e)}},data:function(){return{}}},pe=me,fe=Object(p["a"])(pe,ce,de,!1,null,"4e0a5875",null),ve=fe.exports,Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"标签",size:"medium",required:e.isRequired}},[r("el-select",{attrs:{value:e.localValue,clearable:"",filterable:"","allow-create":"",multiple:"",placeholder:"请选择"},on:{input:e.updateLocalValue}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),r("app-form-error",{attrs:{error:a[0]}}),r("app-form-tip",[e._v("支持手动输入标签，开启推荐时必填")])],1)]}}])})},be=[],he={name:"example-tag",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{options:[{id:1,name:"生活"},{id:2,name:"情怀"},{id:3,name:"信仰"}]}}},ye=he,xe=Object(p["a"])(ye,Ve,be,!1,null,"7491ecfc",null),ge=xe.exports,qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"时间",size:"medium",required:e.isRequired}},[r("el-date-picker",{attrs:{value:e.localValue,type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"发布时间"},on:{input:e.updateLocalValue}}),r("app-form-error",{attrs:{error:a[0]}}),r("app-form-tip",[e._v(" 日期精确到秒，通过自定义规则限制必须大于当前时间 30 秒 ")])],1)]}}])})},_e=[],je={name:"example-time",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}}},ke=je,Oe=Object(p["a"])(ke,qe,_e,!1,null,"11029fe2",null),Re=Oe.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-provider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("el-form-item",{attrs:{label:"类型",size:"medium",required:e.isRequired}},[r("el-radio-group",{attrs:{value:e.localValue},on:{input:e.updateLocalValue}},[r("el-radio",{attrs:{label:1}},[e._v("好莱坞大片")]),r("el-radio",{attrs:{label:2}},[e._v("网络大电影")])],1),r("app-form-error",{attrs:{error:a[0]}})],1)]}}])})},$e=[],Le={name:"example-type",props:{name:String,rules:{type:[String,Object]},value:{required:!1},formValues:{type:Object,required:!1}},setup:function(e,t){var r=Object(n["b"])(e,t),a=r.dirty,l=r.isRequired,u=r.localValue,i=r.setInitialValue,o=r.updateLocalValue;return{dirty:a,isRequired:l,localValue:u,setInitialValue:i,updateLocalValue:o}},data:function(){return{}}},we=Le,Ie=Object(p["a"])(we,Se,$e,!1,null,"1ee10463",null),Ee=Ie.exports,Ne={ExampleActorComplex:v,ExampleCategory:g,ExampleChannel:R,ExampleClock:E,ExampleDescription:A,ExampleId:U,ExampleName:X,ExampleRecommended:ae,ExampleRecommendRate:se,ExampleShortName:ve,ExampleTag:ge,ExampleTime:Re,ExampleType:Ee},ze={name:"example-basic-form",components:Object(i["a"])({},Ne),setup:function(){var e=Object(n["a"])(),t=e.formValues,r=e.updateFormValues,a=Object(n["c"])(),l=a.loading,u=a.withLoading;return{formValues:t,updateFormValues:r,loading:l,withLoading:u}},data:function(){return{}},computed:{exampleId:function(){return this.$route.params.id}},created:function(){this.getFormValues()},methods:{getInitialValues:function(){return{type:2}},getFormValues:function(e){var t=this;this.exampleId?this.withLoading((function(){return t.$services.exampleEntityService.fetchExampleClientEntity({id:t.exampleId}).then((function(e){t.updateFormValues(e)})).catch((function(e){t.$message({type:"error",duration:5e3,message:"获取表单数据失败，错误详情 - ".concat(e.message)})}))})):this.updateFormValues(this.getInitialValues())},save:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:if(r=t.sent,r){t.next=6;break}return e.$message({type:"error",message:"部分表单填写错误，请检查！"}),t.abrupt("return");case 6:e.withLoading(Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$services.exampleEntityService.saveExampleServerEntity(e.formValues);case 3:e.$message({type:"success",message:"保存成功！请查看控制台输出"}),e.$closeView().then((function(){e.$router.push("/table/basic/query")})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$message({type:"error",message:"保存失败！"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))));case 7:case"end":return t.stop()}}),t)})))()}}},Ce=ze,Fe=Object(p["a"])(Ce,a,l,!1,null,"680298e5",null);t["default"]=Fe.exports}}]);
//# sourceMappingURL=form.da81f91e5245f2b1c5d7.js.map